<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Geocoding Tips</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}

.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Cole Brokamp</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="publications.html">Publications</a>
</li>
<li>
  <a href="talks.html">Talks</a>
</li>
<li>
  <a href="software.html">Software</a>
</li>
<li>
  <a href="posts.html">Posts</a>
</li>
<li>
  <a href="shiny.html">R Shiny</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/cole_brokamp">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/cole-brokamp">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="mailto:cole.brokamp@gmail.com">
    <span class="fa fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="http://colebrokamp.com/cv.pdf">
    <span class="fa fa-file-text"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<br>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71324015-1', 'auto');
  ga('send', 'pageview');

</script>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Geocoding Tips</h1>

</div>


<div id="background" class="section level2">
<h2>Background</h2>
<p>This service estimates latitude and longitude coordinates from address strings. For more information on how the program works and how you can implement it yourself, see <a href="https://github.com/cole-brokamp/geocoder" class="uri">https://github.com/cole-brokamp/geocoder</a></p>
<p>The program implements a Ruby interface to parse US street addresses and perform fuzzy lookup against an SQLite3 database. It will return the best matches found, with geographic coordinates using <a href="https://en.wikipedia.org/wiki/Geocoding#Address_interpolation">address interpolation</a> based on 2015 <a href="https://en.wikipedia.org/wiki/Topologically_Integrated_Geographic_Encoding_and_Referencing">TIGER/Line files</a>. It will attempt to fill in missing information, and it knows about standard and common non-standard postal abbreviations, ordinal versus cardinal numbers, and more.</p>
<p>Perhaps the most useful feature to users at CCHMC is that the process is <a href="http://www.hhs.gov/hipaa/for-professionals/privacy/laws-regulations/">HIPAA</a> compliant. Geocoding is completed on a server inside the CCHMC network without using internet access.</p>
</div>
<div id="input" class="section level2">
<h2>Input</h2>
<p>Below are some tips for getting the best results from the offline geocoder located <a href="https://github.com/cole-brokamp/geocoder">here</a>. For more information on how the program works and how you can implement it yourself, including as a Docker image, see <a href="https://github.com/cole-brokamp/geocoder" class="uri">https://github.com/cole-brokamp/geocoder</a>.</p>
<div id="tips-for-getting-the-best-results" class="section level4">
<h4>Tips for Getting the Best Results</h4>
<ul>
<li>omit apartment numbers or “second address line”</li>
<li>plus4 zip codes are ignored, but if they must be included make sure to separate them with a dash (i.e. <code>37209-0000</code> instead of <code>372090000</code>)</li>
<li>capitalization does not affect results</li>
<li>separate the different address components with a space</li>
<li>abbreviations may be used (i.e. <code>St.</code> instead of <code>Street</code> or <code>OH</code> instead of <code>Ohio</code>)</li>
<li>use arabic numerals instead of written numbers (i.e. <code>13</code> instead of <code>thirteen</code>)</li>
<li>spelling should be as accurate as possible, but the program does complete “fuzzy matching” so an exact match is not necessary</li>
<li>address strings with out of order items could return NA (i.e. <code>3333 Burnet Ave Cincinnati 45229 OH</code>)</li>
</ul>
</div>
</div>
<div id="output" class="section level2">
<h2>Output</h2>
<p>The following fields are included in the geocoded output.</p>
<ul>
<li><p><code>address</code>: address string input to the geocoder</p></li>
<li><p><code>lat</code>: estimated latitude coordinate</p></li>
<li><p><code>lon</code>: estimated longitude coordinate</p></li>
<li><p><code>number</code>: The building number of the address. When a building number is not included in a range stored in the address database, the nearest known building number will be returned in its place.</p></li>
<li><p><code>street</code>: The name of the street found in the database that matches the address, given in a normalized form.</p></li>
<li><p><code>street1</code>,<code>street2</code>: When an address is parsed as an intersection, the intersecting streets are returned as <code>street1</code> and <code>street2</code> in place of the <code>number</code> and <code>street</code> fields.</p></li>
<li><p><code>city</code>: The city matching the given address. In the US, this is typically determined from the matching ZIP code, so, for ZIP codes that cover more than one named place, the results may be different from what you expect, but will still be suitable for postal addressing.</p></li>
<li><p><code>state</code>: The two letter postal abbreviation of the state containing the matching address.</p></li>
<li><p><code>zip</code>: The five digit ZIP code of the matching address.</p></li>
<li><p><code>plus4</code>: The ZIP+4 extension parsed from the address, if any. This extension is not actually used in the geocoding process, but is returned for convenience.</p></li>
<li><p><code>fips_county</code>: The FIPS 6-4 code of the county containing the address.</p></li>
<li><p><code>prenum / sufnum</code>: If the building number has a non-numeric prefix or suffix, it will be returned here.</p></li>
<li><p><code>precision</code>: The qualitative precision of the geocode. The value will be one of <code>range</code>, <code>street</code>, <code>intersection</code>, <code>zip</code>, or <code>city</code>. See the next section for more details.</p></li>
<li><p><code>score</code>: The percentage of text match between the given address and the geocoded result, expressed as a number between 0 and 1. A higher score indicates a closer match. Note that each score is relative within a precision method (i.e. a <code>score</code> of <code>0.8</code> with a <code>precision</code> of <code>range</code> is <em>not</em> the same as a <code>score</code> of <code>0.8</code> with a <code>precision</code> of <code>street</code>).</p></li>
</ul>
<div id="results-usable-for-further-analysis" class="section level4">
<h4>Results Usable for Further Analysis</h4>
<p><em>We strongly recommend that only addresses that are geocoded with the precision method of <code>range</code> are used for further analysis or mapping.</em></p>
<p>Other method results are included in the output if <code>range</code> is not available, but should likely not be used as they may be widely inaccurate or imprecise. In order of decreasing accuracy, the following are the possible values for <code>precision</code> in the output file:</p>
<ul>
<li><code>range</code>: interpolated based on address ranges from street segments</li>
<li><code>street</code>: center of the matched street</li>
<li><code>intersection</code>: intersection of two streets</li>
<li><code>zip</code>: centroid of the matched zip code</li>
<li><code>city</code>: centroid of the matched city</li>
</ul>
<p>If results geocoded with methods other than <code>range</code> must be used, also consider using the <code>score</code> field in the output file to filter quality results.</p>
</div>
</div>
<div id="citation" class="section level2">
<h2>Citation</h2>
<p>If you use any geocoding results in a scientific publication, please cite the use of this software. The DOI number and example citations are located at <a href="http://doi.org/10.5281/zenodo.344621" class="uri">http://doi.org/10.5281/zenodo.344621</a>.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
